Iterative process of improvement has been recorded here since the first working build.

Original:
[41 iterations] 30312549607241130511x.bmp: 13.723462%
[55 iterations] 20422629202281059191p.bmp: 4.331429%
[49 iterations] 36293009311171548281x.bmp: 2.062857%
[46 iterations] 36022919509261649571x.bmp: 3.912500%
[20 iterations] 20422629111221044022x.bmp: 19.505000%
[14 iterations] 36683199502211443252x.bmp: 0.491923%
[72 iterations] 20342579204091110141x.bmp: 10.035714%
[52 iterations] 20352579703071128161x.bmp: 3.780357%
[40 iterations] 20422629407061038501x.bmp: 47.787143%

realtime            1m16.186s
usertime            1m16.163s

Memoization components:
[42 iterations] 30312549607241130511x.bmp: 13.808846%
[47 iterations] 20422629202281059191p.bmp: 4.092143%
[54 iterations] 36293009311171548281x.bmp: 1.926429%
[70 iterations] 36022919509261649571x.bmp: 4.069286%
[20 iterations] 20422629111221044022x.bmp: 19.505000%
[13 iterations] 36683199502211443252x.bmp: 0.476538%
[74 iterations] 20342579204091110141x.bmp: 10.146429%
[46 iterations] 20352579703071128161x.bmp: 3.742143%
[41 iterations] 20422629407061038501x.bmp: 47.846786%

realtime            0m58.359s
usertime            0m58.327s

Threshold on cloud cluster:
[42 iterations] 30312549607241130511x.bmp: 13.808846%
[47 iterations] 20422629202281059191p.bmp: 4.092143%
[54 iterations] 36293009311171548281x.bmp: 1.926429%
[70 iterations] 36022919509261649571x.bmp: 4.069286%
[20 iterations] 20422629111221044022x.bmp: 19.505000%
[13 iterations] 36683199502211443252x.bmp: 0.476538%
[45 iterations] 20342579204091110141x.bmp: 0.377857%
[46 iterations] 20352579703071128161x.bmp: 3.742143%
[41 iterations] 20422629407061038501x.bmp: 47.846786%

realtime     0m54.259s
usertime     0m54.227s

Find closest cluster optimization:
[22 iterations] 30312549607241130511x.bmp: 12.165000%
[63 iterations] 20422629202281059191p.bmp: 3.372143%
[40 iterations] 36293009311171548281x.bmp: 2.126071%
[62 iterations] 36022919509261649571x.bmp: 3.348929%
[25 iterations] 20422629111221044022x.bmp: 20.468077%
[11 iterations] 36683199502211443252x.bmp: 0.320000%
[31 iterations] 20342579204091110141x.bmp: 0.327500%
[41 iterations] 20352579703071128161x.bmp: 2.784286%
[47 iterations] 20422629407061038501x.bmp: 46.072857%

realtime            0m43.002s
usertime            0m42.987s

Fix border components:
[43 iterations] 30312549607241130511x.bmp: 12.077308%
[82 iterations] 20422629202281059191p.bmp: 3.349286%
[55 iterations] 36293009311171548281x.bmp: 2.155000%
[61 iterations] 36022919509261649571x.bmp: 3.376071%
[54 iterations] 20422629111221044022x.bmp: 16.775385%
[15 iterations] 36683199502211443252x.bmp: 0.337692%
[60 iterations] 20342579204091110141x.bmp: 0.185714%
[42 iterations] 20352579703071128161x.bmp: 2.539286%
[34 iterations] 20422629407061038501x.bmp: 55.497500%

realtime            0m54.418s
usertime            0m54.390s

Fixed border threshold:
[36 iterations] 30312549607241130511x.bmp: 12.077308%
[74 iterations] 20422629202281059191p.bmp: 3.084286%
[35 iterations] 36293009311171548281x.bmp: 1.715000%
[49 iterations] 36022919509261649571x.bmp: 3.216786%
[35 iterations] 20422629111221044022x.bmp: 18.518846%
[9 iterations] 36683199502211443252x.bmp: 0.305000%
[55 iterations] 20342579204091110141x.bmp: 0.167500%
[36 iterations] 20352579703071128161x.bmp: 2.435714%
[29 iterations] 20422629407061038501x.bmp: 55.497500%

realtime            0m43.991s
usertime            0m43.977s

Distance without square root:
[40 iterations] 30312549607241130511x.bmp: 12.898462%
[71 iterations] 20422629202281059191p.bmp: 3.720357%
[35 iterations] 36293009311171548281x.bmp: 1.790000%
[65 iterations] 36022919509261649571x.bmp: 3.577857%
[30 iterations] 20422629111221044022x.bmp: 21.200385%
[8 iterations] 36683199502211443252x.bmp: 0.304231%
[52 iterations] 20342579204091110141x.bmp: 0.212500%
[34 iterations] 20352579703071128161x.bmp: 2.516071%
[26 iterations] 20422629407061038501x.bmp: 56.250714%

realtime            0m42.818s
usertime            0m42.800s
